<!DOCTYPE html>
<html lang="en-us">
<head>
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <script type="text/javascript" src="https://latest.cactus.chat/cactus.js"></script>
  <link rel="stylesheet" href="https://latest.cactus.chat/style.css" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title> Svelte/ArangoDB development and docker-compose | Saaientist</title>
  <link rel = 'canonical' href = '/posts/svelte-arangodb-development-under-docker-compose/'>
  <meta name="description" content="My external memory. See http://saaientist.blogspot.com for old posts.">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta property="og:title" content="Svelte/ArangoDB development and docker-compose" />
<meta property="og:description" content="Another one for my personal notebook…​
I’m running a docker-based application which includes a svelte front/backend and an ArangoDB database that are orchestrated using docker-compose.
Part of the docker-compose.yml file:
services: frontend: build: context: frontend dockerfile: Dockerfile ports: - 5050:3000 networks: - my_docker_network arangodb: image: arangodb:3.9 restart: always ports: - 8529:8529 networks: - my_docker_network volumes: - arangodb_data_container:/var/lib/arangodb3 - arangodb_apps_data_container:/var/lib/arangodb3-apps networks: my_docker_network: volumes: arangodb_data_container: arangodb_apps_data_container: The frontend can access the database because they are on the same docker network: a database." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/svelte-arangodb-development-under-docker-compose/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-07-18T14:39:00+02:00" />
<meta property="article:modified_time" content="2022-07-18T14:39:00+02:00" />

  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Svelte/ArangoDB development and docker-compose"/>
<meta name="twitter:description" content="Another one for my personal notebook…​
I’m running a docker-based application which includes a svelte front/backend and an ArangoDB database that are orchestrated using docker-compose.
Part of the docker-compose.yml file:
services: frontend: build: context: frontend dockerfile: Dockerfile ports: - 5050:3000 networks: - my_docker_network arangodb: image: arangodb:3.9 restart: always ports: - 8529:8529 networks: - my_docker_network volumes: - arangodb_data_container:/var/lib/arangodb3 - arangodb_apps_data_container:/var/lib/arangodb3-apps networks: my_docker_network: volumes: arangodb_data_container: arangodb_apps_data_container: The frontend can access the database because they are on the same docker network: a database."/>

  
  
    
  
  
  <link rel="stylesheet" href="/css/styles.94f653e9e151e28067a7c5dbbc4600cbd5a3c721e79faaf971e523c40f3b249b8e4f20bb57810dfffa8d559ca5c140fd56eb4cd9c0853113ad08e66afdb08bdd.css" integrity="sha512-lPZT6eFR4oBnp8XbvEYAy9WjxyHnn6r5ceUjxA87JJuOTyC7V4EN//qNVZylwUD9VutM2cCFMROtCOZq/bCL3Q=="> 

  
  
  
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  
<link rel="icon" type="image/png" href="/images/favicon.ico" />

  
  
  
  
</head>

<body class="max-width mx-auto px3 ltr">
  <div class="content index py4">

  <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;" aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/posts">Posts</a></li>
         
        <li><a href="/tags">Tags</a></li>
         
        <li><a href="/about">About</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li>
          <a class="icon" href=" /posts/how-to-create-word-file-from-asciidoc/" aria-label="Previous">
            <i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i>
          </a>
        </li>
        
        
        <li>
          <a class="icon" href="/posts/git-worktree/" aria-label="Next">
            <i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i>
          </a>
        </li>
        
        <li>
          <a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" aria-label="Top of Page">
            <i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i>
          </a>
        </li>
        <li>
          <a class="icon" href="#" aria-label="Share">
            <i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i>
          </a>
        </li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=%2fposts%2fsvelte-arangodb-development-under-docker-compose%2f" aria-label="Facebook">
      <i class="fab fa-facebook " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=%2fposts%2fsvelte-arangodb-development-under-docker-compose%2f&text=Svelte%2fArangoDB%20development%20and%20docker-compose" aria-label="Twitter">
      <i class="fab fa-twitter " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=%2fposts%2fsvelte-arangodb-development-under-docker-compose%2f&title=Svelte%2fArangoDB%20development%20and%20docker-compose" aria-label="Linkedin">
      <i class="fab fa-linkedin " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=%2fposts%2fsvelte-arangodb-development-under-docker-compose%2f&is_video=false&description=Svelte%2fArangoDB%20development%20and%20docker-compose" aria-label="Pinterest">
      <i class="fab fa-pinterest " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=Svelte%2fArangoDB%20development%20and%20docker-compose&body=Check out this article: %2fposts%2fsvelte-arangodb-development-under-docker-compose%2f" aria-label="Email">
      <i class="fas fa-envelope " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=%2fposts%2fsvelte-arangodb-development-under-docker-compose%2f&title=Svelte%2fArangoDB%20development%20and%20docker-compose" aria-label="Pocket">
      <i class="fab fa-get-pocket " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=%2fposts%2fsvelte-arangodb-development-under-docker-compose%2f&title=Svelte%2fArangoDB%20development%20and%20docker-compose" aria-label="reddit">
      <i class="fab fa-reddit " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=%2fposts%2fsvelte-arangodb-development-under-docker-compose%2f&name=Svelte%2fArangoDB%20development%20and%20docker-compose&description=Another%20one%20for%20my%20personal%20notebook%e2%80%a6%e2%80%8b%0aI%e2%80%99m%20running%20a%20docker-based%20application%20which%20includes%20a%20svelte%20front%2fbackend%20and%20an%20ArangoDB%20database%20that%20are%20orchestrated%20using%20docker-compose.%0aPart%20of%20the%20docker-compose.yml%20file%3a%0aservices%3a%20frontend%3a%20build%3a%20context%3a%20frontend%20dockerfile%3a%20Dockerfile%20ports%3a%20-%205050%3a3000%20networks%3a%20-%20my_docker_network%20arangodb%3a%20image%3a%20arangodb%3a3.9%20restart%3a%20always%20ports%3a%20-%208529%3a8529%20networks%3a%20-%20my_docker_network%20volumes%3a%20-%20arangodb_data_container%3a%2fvar%2flib%2farangodb3%20-%20arangodb_apps_data_container%3a%2fvar%2flib%2farangodb3-apps%20networks%3a%20my_docker_network%3a%20volumes%3a%20arangodb_data_container%3a%20arangodb_apps_data_container%3a%20The%20frontend%20can%20access%20the%20database%20because%20they%20are%20on%20the%20same%20docker%20network%3a%20a%20database." aria-label="Tumblr">
      <i class="fab fa-tumblr " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=%2fposts%2fsvelte-arangodb-development-under-docker-compose%2f&t=Svelte%2fArangoDB%20development%20and%20docker-compose" aria-label="Hacker News">
      <i class="fab fa-hacker-news " aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>
    
    <div id="toc">
      
    </div>
    
  </span>
</div>


  <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
    <header>
      <h1 class="posttitle" itemprop="name headline">
        Svelte/ArangoDB development and docker-compose
      </h1>
      <div class="meta">
        
        <div class="postdate">
          
          <time datetime="2022-07-18 14:39:00 &#43;0200 CEST" itemprop="datePublished">2022-07-18</time>
          
        </div>
        
        
        
        
        <div class="article-tag">
            <i class="fas fa-tag"></i>
            
            
            <a class="tag-link" href="/tags/svelte" rel="tag">svelte</a>
            
             ,  
            <a class="tag-link" href="/tags/docker" rel="tag">docker</a>
            
             ,  
            <a class="tag-link" href="/tags/arangodb" rel="tag">arangodb</a>
            
        </div>
        
      </div>
    </header>

  
    
    <div class="content" itemprop="articleBody">
      <div class="paragraph">
<p>Another one for my personal notebook…​</p>
</div>
<div class="paragraph">
<p>I’m running a docker-based application which includes a svelte front/backend and an ArangoDB database that are orchestrated using docker-compose.</p>
</div>
<div class="paragraph">
<p>Part of the <code>docker-compose.yml</code> file:</p>
</div>
<div class="paragraph">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">services</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">frontend</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">build</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">context</span>: <span style="color:#ae81ff">frontend</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">dockerfile</span>: <span style="color:#ae81ff">Dockerfile</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">ports</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">5050</span>:<span style="color:#ae81ff">3000</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">networks</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">my_docker_network</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">arangodb</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">image</span>: <span style="color:#ae81ff">arangodb:3.9</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">restart</span>: <span style="color:#ae81ff">always</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">ports</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">8529</span>:<span style="color:#ae81ff">8529</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">networks</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">my_docker_network</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">volumes</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">arangodb_data_container:/var/lib/arangodb3</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">arangodb_apps_data_container:/var/lib/arangodb3-apps</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">networks</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">my_docker_network</span>:
</span></span><span style="display:flex;"><span><span style="color:#f92672">volumes</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">arangodb_data_container</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">arangodb_apps_data_container:</span></span></span></code></pre></div>
</div>
<div class="paragraph">
<p>The <code>frontend</code> can access the database because they are on the same docker network: a <code>database.js</code> file in svelte points to the database at <a href="http://arangodb:8529" class="bare">http://arangodb:8529</a>, because <code>arangodb</code> is known to svelte.</p>
</div>
<div class="paragraph">
<p>This is good when running the application, but what if you want to develop instead (using the regular <code>npm run dev</code>) and still need access to the database? Also: how do you access the database directly without going through the frontend docker container?</p>
</div>
<div class="sect1">
<h2 id="_accessing_the_arangodb_database_directly">Accessing the ArangoDB database directly</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>arangodb</code> service in the <code>docker-compose.yml</code> file exposes port 8529. This can be accessed directly, so don’t try things like <a href="https://arangodb:8529" class="bare">https://arangodb:8529</a>: it’s just available on <a href="http://localhost:8529" class="bare">http://localhost:8529</a> as if you’re running ArangoDB on the host.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_developing_the_svelte_part">Developing the svelte part</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you want to further develop the svelte app but need the ArangoDB instance running from docker-compose, just run that <code>docker-compose up</code>. In the <code>docker-compose.yml</code> file, we forwarded port 3000 from the container to 5050 on the host. This means that port 3000 is still available.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Start the dockerised application with <code>docker-compose up</code>. The app is now available on localhost:5050.</p>
</li>
<li>
<p>In the <code>database.js</code> file, change the URL of the database from <a href="http://arangodb:8529" class="bare">http://arangodb:8529</a> to <a href="http://localhost:8529" class="bare">http://localhost:8529</a>.</p>
</li>
<li>
<p>In the svelte directory, just run <code>npm run dev</code>. This makes the app available on localhost:3000.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now you can access the app both at ports 5050 and 3000. As you edit the svelte code, the version on 3000 will update, but the one on 5050 will not change because that is running from the frontend image.</p>
</div>
<div class="admonitionblock caution">
<table>
<tbody><tr>
<td class="icon">
<div class="title">Caution</div>
</td>
<td class="content">
<strong>Don’t forget to change the URL for the database from <a href="http://localhost:8529" class="bare">http://localhost:8529</a> back to <a href="http://arangodb:8529" class="bare">http://arangodb:8529</a> before you rebuild the image!</strong>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>

    </div>
  </article>

  
  






  <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/posts">Posts</a></li>
         
          <li><a href="/tags">Tags</a></li>
         
          <li><a href="/about">About</a></li>
        
      </ul>
    </div>

    
    <div id="toc-footer" style="display: none">
      
    </div>
    

    <div id="share-footer" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=%2fposts%2fsvelte-arangodb-development-under-docker-compose%2f" aria-label="Facebook">
      <i class="fab fa-facebook fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=%2fposts%2fsvelte-arangodb-development-under-docker-compose%2f&text=Svelte%2fArangoDB%20development%20and%20docker-compose" aria-label="Twitter">
      <i class="fab fa-twitter fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=%2fposts%2fsvelte-arangodb-development-under-docker-compose%2f&title=Svelte%2fArangoDB%20development%20and%20docker-compose" aria-label="Linkedin">
      <i class="fab fa-linkedin fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=%2fposts%2fsvelte-arangodb-development-under-docker-compose%2f&is_video=false&description=Svelte%2fArangoDB%20development%20and%20docker-compose" aria-label="Pinterest">
      <i class="fab fa-pinterest fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=Svelte%2fArangoDB%20development%20and%20docker-compose&body=Check out this article: %2fposts%2fsvelte-arangodb-development-under-docker-compose%2f" aria-label="Email">
      <i class="fas fa-envelope fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=%2fposts%2fsvelte-arangodb-development-under-docker-compose%2f&title=Svelte%2fArangoDB%20development%20and%20docker-compose" aria-label="Pocket">
      <i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=%2fposts%2fsvelte-arangodb-development-under-docker-compose%2f&title=Svelte%2fArangoDB%20development%20and%20docker-compose" aria-label="reddit">
      <i class="fab fa-reddit fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=%2fposts%2fsvelte-arangodb-development-under-docker-compose%2f&name=Svelte%2fArangoDB%20development%20and%20docker-compose&description=Another%20one%20for%20my%20personal%20notebook%e2%80%a6%e2%80%8b%0aI%e2%80%99m%20running%20a%20docker-based%20application%20which%20includes%20a%20svelte%20front%2fbackend%20and%20an%20ArangoDB%20database%20that%20are%20orchestrated%20using%20docker-compose.%0aPart%20of%20the%20docker-compose.yml%20file%3a%0aservices%3a%20frontend%3a%20build%3a%20context%3a%20frontend%20dockerfile%3a%20Dockerfile%20ports%3a%20-%205050%3a3000%20networks%3a%20-%20my_docker_network%20arangodb%3a%20image%3a%20arangodb%3a3.9%20restart%3a%20always%20ports%3a%20-%208529%3a8529%20networks%3a%20-%20my_docker_network%20volumes%3a%20-%20arangodb_data_container%3a%2fvar%2flib%2farangodb3%20-%20arangodb_apps_data_container%3a%2fvar%2flib%2farangodb3-apps%20networks%3a%20my_docker_network%3a%20volumes%3a%20arangodb_data_container%3a%20arangodb_apps_data_container%3a%20The%20frontend%20can%20access%20the%20database%20because%20they%20are%20on%20the%20same%20docker%20network%3a%20a%20database." aria-label="Tumblr">
      <i class="fab fa-tumblr fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=%2fposts%2fsvelte-arangodb-development-under-docker-compose%2f&t=Svelte%2fArangoDB%20development%20and%20docker-compose" aria-label="Hacker News">
      <i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>

    <div id="actions-footer">
      
        <a id="menu-toggle" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;" aria-label="Menu">
          <i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        
        <a id="toc-toggle" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;" aria-label="TOC">
          <i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        
        <a id="share-toggle" class="icon" href="#" onclick="$('#share-footer').toggle();return false;" aria-label="Share">
          <i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" aria-label="Top of Page">
          <i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>


  <footer id="footer">
  <div class="footer-left">
    Copyright  &copy; 2024  Saaientist 
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/posts">Posts</a></li>
         
        <li><a href="/tags">Tags</a></li>
         
        <li><a href="/about">About</a></li>
        
      </ul>
    </nav>
  </div>
</footer>


  </div>
</body>

<link rel="stylesheet" href=/lib/font-awesome/css/all.min.css>
<script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>

<script src=/js/code-copy.js></script>




</html>
