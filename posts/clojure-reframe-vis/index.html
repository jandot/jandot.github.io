<!DOCTYPE html>
<html lang="en-us">
<head>
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <script type="text/javascript" src="https://latest.cactus.chat/cactus.js"></script>
  <link rel="stylesheet" href="https://latest.cactus.chat/style.css" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title> Clojurescript, re-frame and modular data visualisation | Saaientist</title>
  <link rel = 'canonical' href = '/posts/clojure-reframe-vis/'>
  <meta name="description" content="My external memory. See http://saaientist.blogspot.com for old posts.">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta property="og:title" content="Clojurescript, re-frame and modular data visualisation" />
<meta property="og:description" content="One of the issues we still have is how to combine our custom data visualisations in multi-view dashboards with brushing/linking. We&#8217;ll have a programmer work on this for the next two years, but as clojure is a bit of a hobby I&#8217;d like to try that out as well. It appears that clojurescript re-frame fits the bill.
 Get set up: 1 2 3  lein new re-frame my-project cd my-project lein figwheel dev" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/clojure-reframe-vis/" />
<meta property="article:published_time" content="2019-04-06T00:00:00+00:00" />
<meta property="article:modified_time" content="2019-04-06T00:00:00+00:00" />

  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Clojurescript, re-frame and modular data visualisation"/>
<meta name="twitter:description" content="One of the issues we still have is how to combine our custom data visualisations in multi-view dashboards with brushing/linking. We&#8217;ll have a programmer work on this for the next two years, but as clojure is a bit of a hobby I&#8217;d like to try that out as well. It appears that clojurescript re-frame fits the bill.
 Get set up: 1 2 3  lein new re-frame my-project cd my-project lein figwheel dev"/>

  
  
    
  
  
  <link rel="stylesheet" href="/css/styles.94f653e9e151e28067a7c5dbbc4600cbd5a3c721e79faaf971e523c40f3b249b8e4f20bb57810dfffa8d559ca5c140fd56eb4cd9c0853113ad08e66afdb08bdd.css" integrity="sha512-lPZT6eFR4oBnp8XbvEYAy9WjxyHnn6r5ceUjxA87JJuOTyC7V4EN//qNVZylwUD9VutM2cCFMROtCOZq/bCL3Q=="> 

  
  
  
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  
<link rel="icon" type="image/png" href="/images/favicon.ico" />

  
  
  
  
</head>

<body class="max-width mx-auto px3 ltr">
  <div class="content index py4">

  <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;" aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/posts">Posts</a></li>
         
        <li><a href="/tags">Tags</a></li>
         
        <li><a href="/about">About</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li>
          <a class="icon" href=" /posts/jupyter-notebooks-docker/" aria-label="Previous">
            <i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i>
          </a>
        </li>
        
        
        <li>
          <a class="icon" href="/posts/running-docker-command-from-svelte/" aria-label="Next">
            <i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i>
          </a>
        </li>
        
        <li>
          <a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" aria-label="Top of Page">
            <i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i>
          </a>
        </li>
        <li>
          <a class="icon" href="#" aria-label="Share">
            <i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i>
          </a>
        </li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=%2fposts%2fclojure-reframe-vis%2f" aria-label="Facebook">
      <i class="fab fa-facebook " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=%2fposts%2fclojure-reframe-vis%2f&text=Clojurescript%2c%20re-frame%20and%20modular%20data%20visualisation" aria-label="Twitter">
      <i class="fab fa-twitter " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=%2fposts%2fclojure-reframe-vis%2f&title=Clojurescript%2c%20re-frame%20and%20modular%20data%20visualisation" aria-label="Linkedin">
      <i class="fab fa-linkedin " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=%2fposts%2fclojure-reframe-vis%2f&is_video=false&description=Clojurescript%2c%20re-frame%20and%20modular%20data%20visualisation" aria-label="Pinterest">
      <i class="fab fa-pinterest " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=Clojurescript%2c%20re-frame%20and%20modular%20data%20visualisation&body=Check out this article: %2fposts%2fclojure-reframe-vis%2f" aria-label="Email">
      <i class="fas fa-envelope " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=%2fposts%2fclojure-reframe-vis%2f&title=Clojurescript%2c%20re-frame%20and%20modular%20data%20visualisation" aria-label="Pocket">
      <i class="fab fa-get-pocket " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=%2fposts%2fclojure-reframe-vis%2f&title=Clojurescript%2c%20re-frame%20and%20modular%20data%20visualisation" aria-label="reddit">
      <i class="fab fa-reddit " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=%2fposts%2fclojure-reframe-vis%2f&name=Clojurescript%2c%20re-frame%20and%20modular%20data%20visualisation&description=One%20of%20the%20issues%20we%20still%20have%20is%20how%20to%20combine%20our%20custom%20data%20visualisations%20in%20multi-view%20dashboards%20with%20brushing%2flinking.%20We%26%238217%3bll%20have%20a%20programmer%20work%20on%20this%20for%20the%20next%20two%20years%2c%20but%20as%20clojure%20is%20a%20bit%20of%20a%20hobby%20I%26%238217%3bd%20like%20to%20try%20that%20out%20as%20well.%20It%20appears%20that%20clojurescript%20re-frame%20fits%20the%20bill.%0a%20Get%20set%20up%3a%201%202%203%20%20lein%20new%20re-frame%20my-project%20cd%20my-project%20lein%20figwheel%20dev" aria-label="Tumblr">
      <i class="fab fa-tumblr " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=%2fposts%2fclojure-reframe-vis%2f&t=Clojurescript%2c%20re-frame%20and%20modular%20data%20visualisation" aria-label="Hacker News">
      <i class="fab fa-hacker-news " aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>
    
    <div id="toc">
      
    </div>
    
  </span>
</div>


  <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
    <header>
      <h1 class="posttitle" itemprop="name headline">
        Clojurescript, re-frame and modular data visualisation
      </h1>
      <div class="meta">
        
        <div class="postdate">
          
          <time datetime="2019-04-06 00:00:00 &#43;0000 UTC" itemprop="datePublished">2019-04-06</time>
          
        </div>
        
        
        
        
        <div class="article-tag">
            <i class="fas fa-tag"></i>
            
            
            <a class="tag-link" href="/tags/clojure" rel="tag">clojure</a>
            
             ,  
            <a class="tag-link" href="/tags/visualisation" rel="tag">visualisation</a>
            
        </div>
        
      </div>
    </header>

  
    
    <div class="content" itemprop="articleBody">
      <div class="paragraph">
<p>One of the issues we still have is how to combine our custom data visualisations in multi-view dashboards with brushing/linking. We&#8217;ll have a programmer work on this for the next two years, but as clojure is a bit of a hobby I&#8217;d like to try that out as well. It appears that clojurescript <a href="https://github.com/Day8/re-frame">re-frame</a> fits the bill.</p>
</div>
<div class="paragraph">
<p>Get set up:
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">lein new re-frame my-project
cd my-project
lein figwheel dev</code></pre></td></tr></table>
</div>
</div></p>
</div>
<div class="paragraph">
<p><code>my-project/resources/public/index.html</code> is the landing page for the application. It contains a <code>div</code> with id <code>app</code> that will hold the actual html and svg that we&#8217;ll create in <code>views.cljs</code>.</p>
</div>
<div class="paragraph">
<div class="title"><code>index.html</code></div>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#75715e">&lt;!doctype html&gt;</span>
&lt;<span style="color:#f92672">html</span> <span style="color:#a6e22e">lang</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;en&#34;</span>&gt;
  &lt;<span style="color:#f92672">head</span>&gt;
    &lt;<span style="color:#f92672">meta</span> <span style="color:#a6e22e">charset</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;utf-8&#39;</span>&gt;


  &lt;/<span style="color:#f92672">head</span>&gt;
  &lt;<span style="color:#f92672">body</span>&gt;
    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;app&#34;</span>&gt;&lt;/<span style="color:#f92672">div</span>&gt;
    &lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;js/compiled/app.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
    &lt;<span style="color:#f92672">script</span>&gt;<span style="color:#a6e22e">my_re_frame</span>.<span style="color:#a6e22e">core</span>.<span style="color:#a6e22e">init</span>();&lt;/<span style="color:#f92672">script</span>&gt;
  &lt;/<span style="color:#f92672">body</span>&gt;
&lt;/<span style="color:#f92672">html</span>&gt;</code></pre></td></tr></table>
</div>
</div>
</div>
<div class="paragraph">
<p>The <code>my-project/src/cljs/my_project</code> directory hosts the most important files.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>core.cljs</code> defines which div in <code>index.html</code> is used to mount the application.</p>
</li>
<li>
<p><code>db.cljs</code> holds the application state.</p>
</li>
<li>
<p><code>events.cljs</code>: no idea yet what this does&#8230;&#8203;</p>
</li>
<li>
<p><code>subs.cljs</code> contains subscriptions to different parts of the application state</p>
</li>
<li>
<p><code>views.cljs</code> holds the actual application code</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>I still need to read the '6-domino cascade' part at the re-frame website, so it&#8217;s not all clear yet. Will update here where I get there&#8230;&#8203;</p>
</div>
<div class="sect1">
<h2 id="_version_1_straightforwardly_creating_separate_svg_elements">Version 1 - Straightforwardly creating separate svg elements</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>core.cljs</code>: didn&#8217;t touch this
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">(<span style="color:#66d9ef">ns </span>my-re-frame.core
  (<span style="color:#e6db74">:require</span>
   [reagent.core <span style="color:#e6db74">:as</span> reagent]
   [re-frame.core <span style="color:#e6db74">:as</span> re-frame]
   [my-re-frame.events <span style="color:#e6db74">:as</span> events]
   [my-re-frame.views <span style="color:#e6db74">:as</span> views]
   [my-re-frame.config <span style="color:#e6db74">:as</span> config]
   ))

(<span style="color:#66d9ef">defn </span>dev-setup []
  (when config/debug?
    (<span style="color:#a6e22e">enable-console-print!</span>)
    (println <span style="color:#e6db74">&#34;dev mode&#34;</span>)))

(<span style="color:#66d9ef">defn </span>mount-root []
  (<span style="color:#a6e22e">re-frame/clear-subscription-cache!</span>)
  (<span style="color:#a6e22e">reagent/render</span> [views/main-panel]
                  (<span style="color:#a6e22e">.getElementById</span> js/document <span style="color:#e6db74">&#34;app&#34;</span>)))

(<span style="color:#66d9ef">defn </span><span style="color:#f92672">^</span><span style="color:#e6db74">:export</span> init []
  (<span style="color:#a6e22e">re-frame/dispatch-sync</span> [<span style="color:#e6db74">::events/initialize-db</span>])
  (<span style="color:#a6e22e">dev-setup</span>)
  (<span style="color:#a6e22e">mount-root</span>))</code></pre></td></tr></table>
</div>
</div></p>
</div>
<div class="paragraph">
<p><code>db.cljs</code> holds the app state
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">(<span style="color:#66d9ef">ns </span>my-re-frame.db)

(<span style="color:#66d9ef">def </span>default-db
  {<span style="color:#e6db74">:name</span> <span style="color:#e6db74">&#34;re-frame&#34;</span>
   <span style="color:#e6db74">:data</span> [<span style="color:#ae81ff">1</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">5</span> <span style="color:#ae81ff">8</span> <span style="color:#ae81ff">13</span> <span style="color:#ae81ff">21</span> <span style="color:#ae81ff">34</span> <span style="color:#ae81ff">55</span> <span style="color:#ae81ff">89</span>]})</code></pre></td></tr></table>
</div>
</div></p>
</div>
<div class="paragraph">
<p><code>events.cljs</code>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">(<span style="color:#66d9ef">ns </span>my-re-frame.events
  (<span style="color:#e6db74">:require</span>
   [re-frame.core <span style="color:#e6db74">:as</span> re-frame]
   [my-re-frame.db <span style="color:#e6db74">:as</span> db]
   ))

(<span style="color:#a6e22e">re-frame/reg-event-db</span>
 <span style="color:#e6db74">::initialize-db</span>
 (<span style="color:#66d9ef">fn </span>[_ _]
   db/default-db))</code></pre></td></tr></table>
</div>
</div></p>
</div>
<div class="paragraph">
<p><code>subs.cljs</code>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">(<span style="color:#66d9ef">ns </span>my-re-frame.subs
  (<span style="color:#e6db74">:require</span>
   [re-frame.core <span style="color:#e6db74">:as</span> re-frame]))

(<span style="color:#a6e22e">re-frame/reg-sub</span>
 <span style="color:#e6db74">::name</span>
 (<span style="color:#66d9ef">fn </span>[db]
   (<span style="color:#e6db74">:name</span> db)))

(<span style="color:#a6e22e">re-frame/reg-sub</span>
  <span style="color:#e6db74">::data</span>
  (<span style="color:#66d9ef">fn </span>[db]
    (<span style="color:#e6db74">:data</span> db)))</code></pre></td></tr></table>
</div>
</div></p>
</div>
<div class="paragraph">
<p><code>views.cljs</code> is where I define the main panel, as well as the functions to draw circle and rectangle. These latter two should later be moved to separate files so as to make this truly modular.
Note the <code>:on-mouse-over</code> and <code>:on-click</code> (and keep a look at your browser console); we&#8217;ll probably use that later for brushing/linking.
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">(<span style="color:#66d9ef">ns </span>my-re-frame.views
  (<span style="color:#e6db74">:require</span>
   [re-frame.core <span style="color:#e6db74">:as</span> re-frame]
   [my-re-frame.subs <span style="color:#e6db74">:as</span> subs]))

(<span style="color:#66d9ef">defn </span>rect
  [pos]
  [<span style="color:#e6db74">:rect</span> {
    <span style="color:#e6db74">:style</span> {
      <span style="color:#e6db74">:fill</span> <span style="color:#e6db74">&#34;rgba(0,0,128,0.3)&#34;</span>
      <span style="color:#e6db74">:stroke-width</span> <span style="color:#ae81ff">0</span>}
    <span style="color:#e6db74">:key</span> (str <span style="color:#e6db74">&#34;r&#34;</span> pos)
    <span style="color:#e6db74">:x</span> (+ <span style="color:#ae81ff">50</span> pos)
    <span style="color:#e6db74">:y</span> (+ <span style="color:#ae81ff">50</span> pos)
    <span style="color:#e6db74">:width</span> <span style="color:#ae81ff">10</span>
    <span style="color:#e6db74">:height</span> <span style="color:#ae81ff">10</span>
    <span style="color:#e6db74">:on-mouse-over</span> <span style="color:#f92672">#</span>(println (str <span style="color:#e6db74">&#34;rect&#34;</span> pos))
  }])

(<span style="color:#66d9ef">defn </span>circle
  [pos]
  [<span style="color:#e6db74">:ellipse</span> {
    <span style="color:#e6db74">:style</span> {
      <span style="color:#e6db74">:fill</span> <span style="color:#e6db74">&#34;rgba(128,0,0,0.3)&#34;</span>
      <span style="color:#e6db74">:stroke-width</span> <span style="color:#ae81ff">0</span>}
    <span style="color:#e6db74">:key</span> (str <span style="color:#e6db74">&#34;c&#34;</span> pos)
    <span style="color:#e6db74">:cx</span> (+ (+ pos <span style="color:#ae81ff">50</span>) <span style="color:#ae81ff">50</span>)
    <span style="color:#e6db74">:cy</span> (+ pos <span style="color:#ae81ff">50</span>)
    <span style="color:#e6db74">:rx</span> <span style="color:#ae81ff">10</span>
    <span style="color:#e6db74">:ry</span> <span style="color:#ae81ff">10</span>
    <span style="color:#e6db74">:on-mouse-over</span> <span style="color:#f92672">#</span>(println (str <span style="color:#e6db74">&#34;circle&#34;</span> pos))
  }])

(<span style="color:#66d9ef">defn </span>main-panel []
  (<span style="color:#66d9ef">let </span>[name (<span style="color:#a6e22e">re-frame/subscribe</span> [<span style="color:#e6db74">::subs/name</span>])
        data (<span style="color:#a6e22e">re-frame/subscribe</span> [<span style="color:#e6db74">::subs/data</span>])]
    [<span style="color:#e6db74">:div</span>
      [<span style="color:#e6db74">:h1</span> <span style="color:#e6db74">&#34;Hello from &#34;</span> <span style="color:#f92672">@</span>name]
      [<span style="color:#e6db74">:p</span> <span style="color:#e6db74">&#34;Before&#34;</span>]
      [<span style="color:#e6db74">:br</span>]
      [<span style="color:#e6db74">:svg</span> {<span style="color:#e6db74">:x</span> <span style="color:#ae81ff">0</span> <span style="color:#e6db74">:y</span> <span style="color:#ae81ff">0</span> <span style="color:#e6db74">:width</span> <span style="color:#ae81ff">400</span> <span style="color:#e6db74">:height</span> <span style="color:#ae81ff">200</span> <span style="color:#e6db74">:on-click</span> <span style="color:#f92672">#</span>(println <span style="color:#e6db74">&#34;Clicked&#34;</span>)}
        (map rect <span style="color:#f92672">@</span>data)
        (map circle <span style="color:#f92672">@</span>data)
      ]
      [<span style="color:#e6db74">:br</span>]
      [<span style="color:#e6db74">:p</span> <span style="color:#e6db74">&#34;After&#34;</span>]

    ]))</code></pre></td></tr></table>
</div>
</div></p>
</div>
<div class="paragraph">
<p>Here&#8217;s the result:&lt;br/&gt;
image::re-frame_screenshot.png[width=25%]</p>
</div>
<div class="paragraph">
<p>Here we&#8217;re just straightforwardly calling a <code>(map circle @data)</code> to create the separate SVG elements.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_version_2_a_complete_plot_and_passing_options">Version 2 - A complete plot and passing options</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Instead of directly creating a separate circle for each datapoint, we want to create a scatterplot that takes the complete dataset as input.</p>
</div>
<div class="sect2">
<h3 id="_step_1_replace_map_with_call_to_creator_function">Step 1: replace <code>map</code> with call to creator function</h3>
<div class="paragraph">
<p>This is also very simple: we only have to create a <code>scatterplot</code> function, and replace the call in the <code>main-panel</code>.</p>
</div>
<div class="paragraph">
<p><div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">(<span style="color:#66d9ef">defn </span>scatterplot
  [data]
  (map circle data)</code></pre></td></tr></table>
</div>
</div>
Make sure to put this function <em>after</em> the definition of the <code>circle</code> function, otherwise it will complain.</p>
</div>
<div class="paragraph">
<p>We now have to replace the call in the <code>main-panel</code>:
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">...
[<span style="color:#e6db74">:svg</span> {<span style="color:#e6db74">:x</span> <span style="color:#ae81ff">0</span> <span style="color:#e6db74">:y</span> <span style="color:#ae81ff">0</span> <span style="color:#e6db74">:width</span> <span style="color:#ae81ff">400</span> <span style="color:#e6db74">:height</span> <span style="color:#ae81ff">200</span> <span style="color:#e6db74">:on-click</span> <span style="color:#f92672">#</span>(println <span style="color:#e6db74">&#34;Clicked&#34;</span>)}
  (map rect <span style="color:#f92672">@</span>data)
  (<span style="color:#a6e22e">scatterplot</span> <span style="color:#f92672">@</span>data)
]
...</code></pre></td></tr></table>
</div>
</div></p>
</div>
</div>
<div class="sect2">
<h3 id="_step_2_passing_options_to_the_scatterplot">Step 2: passing options to the scatterplot</h3>
<div class="paragraph">
<p>We might have a border around our scatterplot. Or not&#8230;&#8203; Of course we can create different functions: one for scatterplot without border, and one with border. This obviously is not scalable to other options. So let&#8217;s see if we can get this working: draw a scatterplot <em>with</em> a border next to one <em>without</em>.</p>
</div>
<div class="paragraph">
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">...
[<span style="color:#e6db74">:svg</span> {<span style="color:#e6db74">:x</span> <span style="color:#ae81ff">0</span> <span style="color:#e6db74">:y</span> <span style="color:#ae81ff">0</span> <span style="color:#e6db74">:width</span> <span style="color:#ae81ff">200</span> <span style="color:#e6db74">:height</span> <span style="color:#ae81ff">200</span> <span style="color:#e6db74">:on-click</span> <span style="color:#f92672">#</span>(println <span style="color:#e6db74">&#34;Clicked&#34;</span>)}
        (<span style="color:#a6e22e">scatterplot</span> {<span style="color:#e6db74">:border</span> true} <span style="color:#f92672">@</span>data)
        (<span style="color:#a6e22e">scatterplot</span> {<span style="color:#e6db74">:border</span> false} <span style="color:#f92672">@</span>data)
]
...</code></pre></td></tr></table>
</div>
</div>
</div>
<div class="paragraph">
<p>This took a while to figure out, simply because the <code>scatterplot</code> function needs to return a single data structure. I must say: figwheel helped a <em>lot</em> here.</p>
</div>
<div class="paragraph">
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">(<span style="color:#66d9ef">defn </span>scatterplot
  [opts data]
  (<span style="color:#a6e22e">-&gt;&gt;</span> []
       (<span style="color:#f92672">#</span>(<span style="color:#66d9ef">if </span>(= (<span style="color:#e6db74">:border</span> opts) true) (conj % (<span style="color:#a6e22e">border</span> <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">200</span> <span style="color:#ae81ff">200</span>))))
       (<span style="color:#f92672">#</span>(conj % (map circle data)))
       (<span style="color:#a6e22e">flatten</span>)
       (<span style="color:#a6e22e">partition</span> <span style="color:#ae81ff">2</span>)
       (map vec)))</code></pre></td></tr></table>
</div>
</div>
</div>
<div class="paragraph">
<p>Having access to a REPL that is connected to the browser works wonders. The <code>lein figwheel dev</code> mentioned above starts a REPL that is connected live to your code. Whenever you save your file, these changes are reflected here as well. To investigate what the <code>scatterplot</code> function returned, I&#8217;d just run it in that REPL:</p>
</div>
<div class="paragraph">
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">(<span style="color:#66d9ef">ns </span>my-re-frame.views)
(<span style="color:#a6e22e">scatterplot</span> {<span style="color:#e6db74">:border</span> true} [<span style="color:#ae81ff">1</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">3</span>])</code></pre></td></tr></table>
</div>
</div>
</div>
<div class="paragraph">
<p>This returns
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">([<span style="color:#e6db74">:rect</span>
  {<span style="color:#e6db74">:style</span> {<span style="color:#e6db74">:fill</span> <span style="color:#e6db74">&#34;none&#34;</span>, <span style="color:#e6db74">:stroke</span> <span style="color:#e6db74">&#34;black&#34;</span>, <span style="color:#e6db74">:stroke-width</span> <span style="color:#ae81ff">1</span>},
   <span style="color:#e6db74">:x</span> <span style="color:#ae81ff">0</span>,
   <span style="color:#e6db74">:y</span> <span style="color:#ae81ff">0</span>,
   <span style="color:#e6db74">:width</span> <span style="color:#ae81ff">200</span>,
   <span style="color:#e6db74">:height</span> <span style="color:#ae81ff">200</span>}]
 [<span style="color:#e6db74">:ellipse</span>
  {<span style="color:#e6db74">:style</span> {<span style="color:#e6db74">:fill</span> <span style="color:#e6db74">&#34;rgba(128,0,0,0.3)&#34;</span>, <span style="color:#e6db74">:stroke-width</span> <span style="color:#ae81ff">0</span>},
   <span style="color:#e6db74">:key</span> <span style="color:#e6db74">&#34;c0.5915471522077664&#34;</span>,
   <span style="color:#e6db74">:cx</span> <span style="color:#ae81ff">1</span>,
   <span style="color:#e6db74">:cy</span> <span style="color:#ae81ff">1</span>,
   <span style="color:#e6db74">:rx</span> <span style="color:#ae81ff">10</span>,
   <span style="color:#e6db74">:ry</span> <span style="color:#ae81ff">10</span>,
   <span style="color:#e6db74">:on-mouse-over</span> <span style="color:#f92672">#</span>object[Function]}]
 [<span style="color:#e6db74">:ellipse</span>
  {<span style="color:#e6db74">:style</span> {<span style="color:#e6db74">:fill</span> <span style="color:#e6db74">&#34;rgba(128,0,0,0.3)&#34;</span>, <span style="color:#e6db74">:stroke-width</span> <span style="color:#ae81ff">0</span>},
   <span style="color:#e6db74">:key</span> <span style="color:#e6db74">&#34;c0.6396423198112418&#34;</span>,
   <span style="color:#e6db74">:cx</span> <span style="color:#ae81ff">2</span>,
   <span style="color:#e6db74">:cy</span> <span style="color:#ae81ff">2</span>,
   <span style="color:#e6db74">:rx</span> <span style="color:#ae81ff">10</span>,
   <span style="color:#e6db74">:ry</span> <span style="color:#ae81ff">10</span>,
   <span style="color:#e6db74">:on-mouse-over</span> <span style="color:#f92672">#</span>object[Function]}]
 [<span style="color:#e6db74">:ellipse</span>
  {<span style="color:#e6db74">:style</span> {<span style="color:#e6db74">:fill</span> <span style="color:#e6db74">&#34;rgba(128,0,0,0.3)&#34;</span>, <span style="color:#e6db74">:stroke-width</span> <span style="color:#ae81ff">0</span>},
   <span style="color:#e6db74">:key</span> <span style="color:#e6db74">&#34;c0.7417803449596954&#34;</span>,
   <span style="color:#e6db74">:cx</span> <span style="color:#ae81ff">3</span>,
   <span style="color:#e6db74">:cy</span> <span style="color:#ae81ff">3</span>,
   <span style="color:#e6db74">:rx</span> <span style="color:#ae81ff">10</span>,
   <span style="color:#e6db74">:ry</span> <span style="color:#ae81ff">10</span>,
   <span style="color:#e6db74">:on-mouse-over</span> <span style="color:#f92672">#</span>object[Function]}])</code></pre></td></tr></table>
</div>
</div></p>
</div>
<div class="paragraph">
<p>Initially, I&#8217;d get output where the <code>:rect</code> was not really part of the same data structure. Hence the <code>flatten</code> &#8594; <code>partition</code> &#8594; <code>map vec</code>.</p>
</div>
<div class="paragraph">
<p><div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">[[<span style="color:#e6db74">:rect</span>
  {<span style="color:#e6db74">:style</span> {<span style="color:#e6db74">:fill</span> <span style="color:#e6db74">&#34;none&#34;</span>, <span style="color:#e6db74">:stroke</span> <span style="color:#e6db74">&#34;black&#34;</span>, <span style="color:#e6db74">:stroke-width</span> <span style="color:#ae81ff">1</span>},
   <span style="color:#e6db74">:x</span> <span style="color:#ae81ff">0</span>,
   ...}]
 ([<span style="color:#e6db74">:ellipse</span>
   {<span style="color:#e6db74">:style</span> {<span style="color:#e6db74">:fill</span> <span style="color:#e6db74">&#34;rgba(128,0,0,0.3)&#34;</span>, <span style="color:#e6db74">:stroke-width</span> <span style="color:#ae81ff">0</span>},
    <span style="color:#e6db74">:key</span> <span style="color:#e6db74">&#34;c0.6519528849418721&#34;</span>,
    ...}]
  [<span style="color:#e6db74">:ellipse</span>
   {<span style="color:#e6db74">:style</span> {<span style="color:#e6db74">:fill</span> <span style="color:#e6db74">&#34;rgba(128,0,0,0.3)&#34;</span>, <span style="color:#e6db74">:stroke-width</span> <span style="color:#ae81ff">0</span>},
    <span style="color:#e6db74">:key</span> <span style="color:#e6db74">&#34;c0.9563097578789714&#34;</span>,
    ...}]
  [<span style="color:#e6db74">:ellipse</span>
   {<span style="color:#e6db74">:style</span> {<span style="color:#e6db74">:fill</span> <span style="color:#e6db74">&#34;rgba(128,0,0,0.3)&#34;</span>, <span style="color:#e6db74">:stroke-width</span> <span style="color:#ae81ff">0</span>},
    <span style="color:#e6db74">:key</span> <span style="color:#e6db74">&#34;c0.449294105728856&#34;</span>,
    ...}])]</code></pre></td></tr></table>
</div>
</div>
(To be clear: this last bit of output is the <em>wrong, not working</em> one&#8230;&#8203;)</p>
</div>
<div class="paragraph">
<p>The final picture looks like this:&lt;br/&gt;
image::re-frame_screenshot_borders.png[width=25%]</p>
</div>
<div class="paragraph">
<p>Next:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>getting the id of the element on select/hover&#8230;&#8203;</p>
</li>
<li>
<p>getting mouse position</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_version_3_getting_the_mouse_position">Version 3 - Getting the mouse position</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In order to get the mouse position, we need to unfortunately dig into javascript itself. The code block below prints the mouse position to console whenever the mouse moves over the scatterplot.</p>
</div>
<div class="paragraph">
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">[<span style="color:#e6db74">:svg</span> {<span style="color:#e6db74">:x</span> <span style="color:#ae81ff">0</span>
       <span style="color:#e6db74">:y</span> <span style="color:#ae81ff">0</span>
       <span style="color:#e6db74">:width</span> <span style="color:#ae81ff">200</span>
       <span style="color:#e6db74">:height</span> <span style="color:#ae81ff">200</span>
       <span style="color:#e6db74">:on-mouse-move</span> (<span style="color:#66d9ef">fn </span>[e] (println (<span style="color:#a6e22e">.-clientX</span> e)))}
  (<span style="color:#a6e22e">scatterplot</span> {<span style="color:#e6db74">:border</span> true} <span style="color:#f92672">@</span>data)
]</code></pre></td></tr></table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_version_4_changing_state">Version 4 - Changing state</h2>
<div class="sectionbody">
<div class="paragraph">
<p>At some point we&#8217;ll want to change state. Never having used atoms before, I did need some help from [this blog post](<a href="http://blog.klipse.tech/clojure/2019/02/17/reframe-tutorial.html" class="bare">http://blog.klipse.tech/clojure/2019/02/17/reframe-tutorial.html</a>).</p>
</div>
<div class="paragraph">
<p>Changes to <code>db.cljs</code>:
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">(<span style="color:#66d9ef">def </span>default-db
  {<span style="color:#e6db74">:name</span> <span style="color:#e6db74">&#34;imp&#34;</span>
   <span style="color:#e6db74">:data</span> [<span style="color:#ae81ff">1</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">5</span> <span style="color:#ae81ff">8</span> <span style="color:#ae81ff">13</span> <span style="color:#ae81ff">21</span> <span style="color:#ae81ff">34</span> <span style="color:#ae81ff">55</span> <span style="color:#ae81ff">89</span>]
   <span style="color:#e6db74">:selected</span> nil
   })</code></pre></td></tr></table>
</div>
</div></p>
</div>
<div class="paragraph">
<p>In <code>subs.cljs</code>:
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">(<span style="color:#a6e22e">re-frame/reg-sub</span>
  <span style="color:#e6db74">::selected-point</span>
  (<span style="color:#66d9ef">fn </span>[db]
    (<span style="color:#e6db74">:selected-point</span> db)))</code></pre></td></tr></table>
</div>
</div></p>
</div>
<div class="paragraph">
<p>In <code>events.cljs</code>:
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">(<span style="color:#a6e22e">re-frame/reg-event-db</span>
 <span style="color:#e6db74">:selected-point-change</span>
 (<span style="color:#66d9ef">fn </span>[db [_ new-value]]
   (assoc db <span style="color:#e6db74">:selected-point</span> new-value)))</code></pre></td></tr></table>
</div>
</div></p>
</div>
<div class="paragraph">
<p>In <code>views.cljs</code>, we change <code>circle</code> so that the <code>selected-point</code> stores the value of any point that is clicked on:
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">(<span style="color:#66d9ef">defn </span>circle
  [pos]
  [<span style="color:#e6db74">:ellipse</span> {
    <span style="color:#e6db74">:style</span> {
      <span style="color:#e6db74">:fill</span> <span style="color:#e6db74">&#34;rgba(128,0,0,0.3)&#34;</span>
      <span style="color:#e6db74">:stroke-width</span> <span style="color:#ae81ff">0</span>}
    <span style="color:#e6db74">:key</span> (str <span style="color:#e6db74">&#34;c&#34;</span> (<span style="color:#a6e22e">rand</span>))
    <span style="color:#e6db74">:cx</span> pos
    <span style="color:#e6db74">:cy</span> pos
    <span style="color:#e6db74">:rx</span> <span style="color:#ae81ff">10</span>
    <span style="color:#e6db74">:ry</span> <span style="color:#ae81ff">10</span>
    <span style="color:#e6db74">:on-mouse-over</span> <span style="color:#f92672">#</span>(println (str <span style="color:#e6db74">&#34;circle&#34;</span> pos))
    <span style="color:#e6db74">:on-mouse-down</span> <span style="color:#f92672">#</span>(<span style="color:#a6e22e">re-frame/dispatch</span> [<span style="color:#e6db74">:selected-point-change</span> pos])
  }])</code></pre></td></tr></table>
</div>
</div></p>
</div>
<div class="paragraph">
<p>We can then show that e.g. if you click on one of the SVGs. We need to add <code>selected-point</code> to the <code>let</code>, and add an <code>on-click</code> event to an SVG:
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">(<span style="color:#66d9ef">defn </span>main-panel []
  (<span style="color:#66d9ef">let </span>[name (<span style="color:#a6e22e">re-frame/subscribe</span> [<span style="color:#e6db74">::subs/name</span>])
        data (<span style="color:#a6e22e">re-frame/subscribe</span> [<span style="color:#e6db74">::subs/data</span>])
        selected-point (<span style="color:#a6e22e">re-frame/subscribe</span> [<span style="color:#e6db74">::subs/selected-point</span>])]
    ...
    [<span style="color:#e6db74">:svg</span> {<span style="color:#e6db74">:x</span> <span style="color:#ae81ff">0</span> <span style="color:#e6db74">:y</span> <span style="color:#ae81ff">0</span> <span style="color:#e6db74">:width</span> <span style="color:#ae81ff">200</span> <span style="color:#e6db74">:height</span> <span style="color:#ae81ff">200</span>
           <span style="color:#e6db74">:on-click</span> <span style="color:#f92672">#</span>(println <span style="color:#f92672">@</span>selected-point)}
      (<span style="color:#a6e22e">scatterplot</span> {<span style="color:#e6db74">:border</span> true} <span style="color:#f92672">@</span>data)
    ]
    ...</code></pre></td></tr></table>
</div>
</div>
Don&#8217;t have a clue yet why the double <code>::</code>&#8230;&#8203;</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_version_5_very_simple_brushinglinking">Version 5 - Very simple brushing/linking</h2>
<div class="sectionbody">
<div class="paragraph">
<p>OK. Next step: when I hover over one of the datapoints, I want that datapoint in all other plots to be highlighted.</p>
</div>
<div class="paragraph">
<p>At this point we need to add CSS to the picture. For the moment I have just put this in the head of the main <code>index.html</code>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#f92672">style</span>&gt;
  <span style="color:#f92672">rect</span> {fill: rgba(<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">128</span>,<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0.3</span>)}
  <span style="color:#f92672">ellipse</span> {fill: rgba(<span style="color:#ae81ff">128</span>,<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0.3</span>)}
  .<span style="color:#a6e22e">selected</span> {stroke: <span style="color:#66d9ef">red</span>; stroke-width: <span style="color:#ae81ff">2</span>}
&lt;/<span style="color:#f92672">style</span>&gt;</code></pre></td></tr></table>
</div>
</div>
</div>
<div class="paragraph">
<p>The idea is that any selected datapoint will get a red border.</p>
</div>
<div class="paragraph">
<p>In <code>db.cljs</code> we need to add an additional piece of state in the <code>default-db</code>, namely which is the selected point:
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">(<span style="color:#66d9ef">def </span>default-db
  {<span style="color:#e6db74">:name</span> <span style="color:#e6db74">&#34;imp&#34;</span>
   <span style="color:#e6db74">:data</span> [<span style="color:#ae81ff">1</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">5</span> <span style="color:#ae81ff">8</span> <span style="color:#ae81ff">13</span> <span style="color:#ae81ff">21</span> <span style="color:#ae81ff">34</span> <span style="color:#ae81ff">55</span> <span style="color:#ae81ff">89</span>]
   <span style="color:#e6db74">:selected-point</span> nil
   })</code></pre></td></tr></table>
</div>
</div>
which we will access through a function in <code>subs.cljs</code>:
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">(<span style="color:#a6e22e">re-frame/reg-sub</span>
  <span style="color:#e6db74">::selected-point</span>
  (<span style="color:#66d9ef">fn </span>[db]
    (<span style="color:#e6db74">:selected-point</span> db)))</code></pre></td></tr></table>
</div>
</div></p>
</div>
<div class="paragraph">
<p>And here&#8217;s the tricky part: in the view we need to toggle the class of an SVG element between "selected" and an empty string so as to apply the correct CSS. An element is only redrawn if its parent (i.c. <code>scatterplot</code> or <code>barchart</code>) is redrawn, or if one of its properties changes. At this moment, the only property of <code>scatterplot</code> are <code>opts</code> and <code>data</code>, but we need to add <code>selected</code> to that.</p>
</div>
<div class="paragraph">
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">(<span style="color:#66d9ef">defn </span>scatterplot
  [opts selected data]
  (<span style="color:#a6e22e">-&gt;&gt;</span> []
       (<span style="color:#f92672">#</span>(<span style="color:#66d9ef">if </span>(= (<span style="color:#e6db74">:border</span> opts) true) (conj % (<span style="color:#a6e22e">border</span> <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">200</span> <span style="color:#ae81ff">200</span>))))
       (<span style="color:#f92672">#</span>(conj % (map circle data)))
       (<span style="color:#a6e22e">flatten</span>)
       (<span style="color:#a6e22e">partition</span> <span style="color:#ae81ff">2</span>)
       (map vec)
       ))</code></pre></td></tr></table>
</div>
</div>
</div>
<div class="paragraph">
<p>The <em>only</em> thing changed here is the parameters; the code itself has not changed.</p>
</div>
<div class="paragraph">
<p>In the <code>main-panel</code> we need to call <code>scatterplot</code> differently of course: we will add the @selected-point parameter.
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">(<span style="color:#66d9ef">defn </span>main-panel []
  (<span style="color:#66d9ef">let </span>[name (<span style="color:#a6e22e">re-frame/subscribe</span> [<span style="color:#e6db74">::subs/name</span>])
        data (<span style="color:#a6e22e">re-frame/subscribe</span> [<span style="color:#e6db74">::subs/data</span>])
        selected-point (<span style="color:#a6e22e">re-frame/subscribe</span> [<span style="color:#e6db74">::subs/selected-point</span>])]
    [<span style="color:#e6db74">:div</span>
    ...
      [<span style="color:#e6db74">:svg</span> {<span style="color:#e6db74">:x</span> <span style="color:#ae81ff">0</span> <span style="color:#e6db74">:y</span> <span style="color:#ae81ff">0</span> <span style="color:#e6db74">:width</span> <span style="color:#ae81ff">200</span> <span style="color:#e6db74">:height</span> <span style="color:#ae81ff">200</span>}
        (<span style="color:#a6e22e">scatterplot</span> {<span style="color:#e6db74">:border</span> false} <span style="color:#f92672">@</span>selected-point <span style="color:#f92672">@</span>data)
      ]
    ...</code></pre></td></tr></table>
</div>
</div></p>
</div>
<div class="paragraph">
<p>Finally, in the circle function we add a <code>:class</code> parameter which is either "selected" or "" based on whether or not that datapoint is the same as <code>@selected-point</code> or not. The <code>:on-mouse-over</code> makes sure that we actually change the selected point when we move our mouse.
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-clojure" data-lang="clojure">(<span style="color:#66d9ef">defn </span>circle
  [pos]
  (<span style="color:#66d9ef">let </span>[selected-point (<span style="color:#a6e22e">re-frame/subscribe</span> [<span style="color:#e6db74">::subs/selected-point</span>])]
    [<span style="color:#e6db74">:ellipse</span> {
      <span style="color:#e6db74">:key</span> (str <span style="color:#e6db74">&#34;c&#34;</span> (<span style="color:#a6e22e">rand</span>))
      <span style="color:#e6db74">:cx</span> pos
      <span style="color:#e6db74">:cy</span> pos
      <span style="color:#e6db74">:rx</span> <span style="color:#ae81ff">10</span>
      <span style="color:#e6db74">:ry</span> <span style="color:#ae81ff">10</span>
      <span style="color:#e6db74">:class</span> (<span style="color:#66d9ef">if </span>(= pos <span style="color:#f92672">@</span>selected-point) <span style="color:#e6db74">&#34;selected&#34;</span> <span style="color:#e6db74">&#34;&#34;</span>)
      <span style="color:#e6db74">:on-mouse-over</span> <span style="color:#f92672">#</span>(<span style="color:#a6e22e">re-frame/dispatch</span> [<span style="color:#e6db74">:selected-point-change</span> pos])
    }]))</code></pre></td></tr></table>
</div>
</div></p>
</div>
<div class="paragraph">
<p>The result looks like this:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/assets/re-frame_screenshot_brushinglinking.png" alt="re frame screenshot brushinglinking" width="50%">
</div>
</div>
</div>
</div>

    </div>
  </article>

  
  






  <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/posts">Posts</a></li>
         
          <li><a href="/tags">Tags</a></li>
         
          <li><a href="/about">About</a></li>
        
      </ul>
    </div>

    
    <div id="toc-footer" style="display: none">
      
    </div>
    

    <div id="share-footer" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=%2fposts%2fclojure-reframe-vis%2f" aria-label="Facebook">
      <i class="fab fa-facebook fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=%2fposts%2fclojure-reframe-vis%2f&text=Clojurescript%2c%20re-frame%20and%20modular%20data%20visualisation" aria-label="Twitter">
      <i class="fab fa-twitter fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=%2fposts%2fclojure-reframe-vis%2f&title=Clojurescript%2c%20re-frame%20and%20modular%20data%20visualisation" aria-label="Linkedin">
      <i class="fab fa-linkedin fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=%2fposts%2fclojure-reframe-vis%2f&is_video=false&description=Clojurescript%2c%20re-frame%20and%20modular%20data%20visualisation" aria-label="Pinterest">
      <i class="fab fa-pinterest fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=Clojurescript%2c%20re-frame%20and%20modular%20data%20visualisation&body=Check out this article: %2fposts%2fclojure-reframe-vis%2f" aria-label="Email">
      <i class="fas fa-envelope fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=%2fposts%2fclojure-reframe-vis%2f&title=Clojurescript%2c%20re-frame%20and%20modular%20data%20visualisation" aria-label="Pocket">
      <i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=%2fposts%2fclojure-reframe-vis%2f&title=Clojurescript%2c%20re-frame%20and%20modular%20data%20visualisation" aria-label="reddit">
      <i class="fab fa-reddit fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=%2fposts%2fclojure-reframe-vis%2f&name=Clojurescript%2c%20re-frame%20and%20modular%20data%20visualisation&description=One%20of%20the%20issues%20we%20still%20have%20is%20how%20to%20combine%20our%20custom%20data%20visualisations%20in%20multi-view%20dashboards%20with%20brushing%2flinking.%20We%26%238217%3bll%20have%20a%20programmer%20work%20on%20this%20for%20the%20next%20two%20years%2c%20but%20as%20clojure%20is%20a%20bit%20of%20a%20hobby%20I%26%238217%3bd%20like%20to%20try%20that%20out%20as%20well.%20It%20appears%20that%20clojurescript%20re-frame%20fits%20the%20bill.%0a%20Get%20set%20up%3a%201%202%203%20%20lein%20new%20re-frame%20my-project%20cd%20my-project%20lein%20figwheel%20dev" aria-label="Tumblr">
      <i class="fab fa-tumblr fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=%2fposts%2fclojure-reframe-vis%2f&t=Clojurescript%2c%20re-frame%20and%20modular%20data%20visualisation" aria-label="Hacker News">
      <i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>

    <div id="actions-footer">
      
        <a id="menu-toggle" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;" aria-label="Menu">
          <i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        
        <a id="toc-toggle" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;" aria-label="TOC">
          <i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        
        <a id="share-toggle" class="icon" href="#" onclick="$('#share-footer').toggle();return false;" aria-label="Share">
          <i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" aria-label="Top of Page">
          <i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>


  <footer id="footer">
  <div class="footer-left">
    Copyright  &copy; 2023  Saaientist 
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/posts">Posts</a></li>
         
        <li><a href="/tags">Tags</a></li>
         
        <li><a href="/about">About</a></li>
        
      </ul>
    </nav>
  </div>
</footer>


  </div>
</body>

<link rel="stylesheet" href=/lib/font-awesome/css/all.min.css>
<script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>

<script src=/js/code-copy.js></script>




</html>
